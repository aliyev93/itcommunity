<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Index</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <script th:src="@{/js/pnglib.js}"></script>
    <script th:src="@{/js/identicon.js}"></script>
    <!-- Hotjar Tracking Code for http://itcommunity.herokuapp.com -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:1495447,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
</head>
<body>
    <div th:replace="fragments/navbar :: navbar"></div>
    <!-- search -->
    <form th:object="${employeeProfile}" method="POST">
        <div class="container col-md-11">
            <div class="card bg-light">
                <div class="row my-3 mx-2">
                    <div class="col-md-2">
                        <input type="text" class="form-control" th:field="*{userId.name}" placeholder="Ad">
                    </div>
                    <div class="col-md-2">
                        <input type="text" class="form-control" th:field="*{userId.surname}" placeholder="Soyad">
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control" th:field="*{userId.email}" placeholder="Email">
                    </div>
                    <div class="col-md-3">
                        <input type="text" class="form-control" th:field="*{userId.phone}" placeholder="Phone">
                    </div>
                    <div class="col-md-2">

                        <button class="btn btn-dark">
                            <p class="my-0 mx-4">
                                Axtar
                            </p>
                        </button>
                    </div>
                    <div id="accordion" class="w-100 pt-3 pl-3 pr-3">
                        <div class="d-flex">
                            <p>
                                <button class="btn btn-dark collapsed" type="button" data-toggle="collapse" href="#collapseOne" aria-expanded="false">
                                    Languages
                                </button>
                            </p>
                            <p class="pl-3">
                                <button class="btn btn-dark collapsed" type="button" data-toggle="collapse" href="#collapseTwo" aria-expanded="false">
                                    Skills
                                </button>
                            </p>
                        </div>

                        <!--languages-->
                        <div class="card mt-3 bg-light  border-0">
                            <div id="collapseOne" class="collapse" data-parent="#accordion" style="">
                                <div class="p-3">
                                    <div class="row">
                                        <div class="col-md-4 mb-4" th:each="language, stat : ${languages}">
                                            <div class="row">
                                                <div class="col-md-3 col-5 d-flex align-items-center">
                                                    <div class="form-check mr-3">
                                                        <label class="form-check-label" th:text="${language.name}">
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-5 col-7 d-flex align-items-center">
                                                    <div class="form-group mb-0">
                                                        <input th:type="hidden" th:name="${'employeeProfileLanguageList['+stat.index+'].languageId.id'}" th:value="${language.id}">
                                                        <select th:name="${'employeeProfileLanguageList['+stat.index+'].level'}"
                                                                class="form-control" >
                                                            <option selected="" value="0">Level</option>
                                                            <option th:each="i: ${#numbers.sequence(1, 10)}"
                                                                    th:value="${i}"
                                                                    th:text="${i}"
                                                            >
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--skills-->
                        <div class="card mt-3 bg-light  border-0">
                            <div id="collapseTwo" class="collapse" data-parent="#accordion" style="">
                                <div class="p-3">
                                    <div class="row">
                                        <div class="col-md-4 mb-4" th:each="skill, stat : ${skills}"
                                             >
                                            <div class="row">
                                                <div class="col-md-3 col-5 d-flex align-items-center">
                                                    <div class="form-check mr-3">
                                                        <label class="form-check-label" th:text="${skill.name}">
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-5 col-7 d-flex align-items-center">
                                                    <div class="form-group mb-0">
                                                        <input th:type="hidden" th:name="${'employeeProfileSkillList['+stat.index+'].skillId.id'}" th:value="${skill.id}">
                                                        <select th:name="${'employeeProfileSkillList['+stat.index+'].level'}"
                                                                class="form-control" >
                                                            <option selected="" value="0">Level</option>
                                                            <option th:each="i: ${#numbers.sequence(1, 10)}"
                                                                    th:value="${i}"
                                                                    th:text="${i}"
                                                            >
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- developer card -->

    <div class="container mt-4">
        <div class="row">
            <div class=" col-md-4 mt-2" th:each="p : ${employeeList}">
                <div class=" card position-relative developer-card mx-3">
                    <div class="py-2 px-3 position-absolute w-100 h-100 developer-card-details">
                        <div class="row">
                            <h5 class="mb-3 col-md-6" th:text="${p.userId.name+' '+p.userId.surname}"></h5>
                            <div class="social-media col-md-6">
                                <a target="_blank" th:href="${p.githubPath}" class="stretched-link btn btn-dark btn-sm pt-0">
                                    <i class="fab fa-github fa-sm"></i>
                                </a>
                                <a target="_blank" th:href="${p.linkedinPath}" class="stretched-link btn btn-dark btn-sm pt-0">
                                    <i class="fab fa-linkedin fa-sm"></i>
                                </a>
                                <a target="_blank" th:href="${p.cvPath}" class="stretched-link btn btn-dark btn-sm pt-0">
                                    <i class="fas fa-file fa-sm"></i>
                                </a>
                            </div>
                        </div>
                        <h5 class="mb-3" th:text="${p.speciality}"></h5>

                        <p th:text="${p.about}"></p>
                        <div class="mb-3">
                            <h5 class="my-4">Skills</h5>
                            <span th:each="s : ${p.employeeProfileSkillList}">
                                <span th:text="${s.skillId.name}"></span>
                                <div class="progress my-2">
                                     <div class="progress-bar bg-dark"
                                          th:attr="aria-valuenow=${s.level*10}, style=${'width:'+s.level*10+'%'}"
                                          th:text="${s.level*10+'%'}">
                                     </div>
                                </div>
                            </span>
                        </div>
                        <div class="mb-3">
                            <h5 class="my-4">Languages</h5>
                            <div th:each="l : ${p.employeeProfileLanguageList}">
                                <span th:text="${l.languageId.name}"></span>
                                <div class="progress my-2">
                                     <div class="progress-bar bg-dark"
                                          th:attr="aria-valuenow=${l.level*10}, style=${'width:'+l.level*10+'%'}"
                                          th:text="${l.level*10+'%'}">
                                     </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="px-3">
                        <p class="text-center my-3 py-1 rounded border border-success text-success font-weight-bold" th:if="${p.isWorking.equals(1)}">Working</p>
                        <p class="text-center my-3 py-1 rounded border border-success text-success font-weight-bold" th:if="${p.isLookingForWork.equals(1)}">Available for Job Offer</p>
                        <p class="text-center my-3 py-1 rounded border border-danger text-danger font-weight-bold" th:if="${!p.isWorking.equals(1)}">Not Working</p>
                        <p class="text-center my-3 py-1 rounded border border-danger text-danger font-weight-bold" th:if="${!p.isLookingForWork.equals(1)}">Not Available for Job Offer</p>

                        <div class="text-center">
                            <img th:id="${'profile-image-'+p.userId.email}"
                                 class="card-img-top"
                                 style="width: 120px; height: 120px;"/>
                            <script th:inline="javascript">
                                generateIcon(/*[[${'profile-image-'+p.userId.email}]]*/)
                            </script>
                        </div>
                        <div class="card-body text-center">
                            <h5 class="card-title" th:text="${p.userId.name+' '+p.userId.surname}"></h5>
                            <p class="my-4 text-secondary" th:text="${p.speciality}"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

</body>
</html>
